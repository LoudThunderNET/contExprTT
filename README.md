## Тестовое задание
### Предварительные требования
Для Windows должен быть установлен Docker Desktop

### Запуск

В командной строке введите
```
git clone https://github.com/LoudThunderNET/contExprTT.git

cd contExprTT
```
далее выполните команду
```
docker-compose up
```
Откройте браузер и введите в адресной строке http://localhost:5179/swagger
### Что реализовано
Время выполнения одного запроса координат у мастер-системы составляет около 140мс. Два запроса потребуют около 280мс. Поскольку пользователи чаще всего пользуются определенным набором маршрутов, то имеет смысл кэшировать результаты запроса. 
Поскольку сервис мжет масштабироваться горизонтально, то необходимо использовать распределённый кэш. Наиболее распространнёное решение - Redis.
Для работы с Redis используется библиотека StackExchange.Redis. Она позволяет через строку соединения конфигурировать прложение для работы с Redis как с конфигурацией HA, так и с использование Redis sentinel. Это позволяет повысить устойчивости кэширования, а возможности интерфейса StackExchange.Redis позволяют приложению определить доступности Redis без ожидания.

Следующим шагом к повышению отказоустойчивости и снижению зависимости серивса от доступности мастер-системы стала реализация локальной БД на postgres, которая хранит координаты аэропортов. Библиотека npsql позволяет работать с кластером postgres. 
Однако, и локальная БД может стать недоступной. В случае потери свзяи в сервером БД установка соединения выполняется большой задержкой, что сказывается на отзывчивости сервиса. Чтобы минимзировать негативнй эффект от потери связи с БД применён CircuitBreaker из библиотеки Polly.
Наконец, если оказывается недоступными redis и база данных, то обращение выполняется к мастер-системе. Используемый для обращения к мастер-системе, HttpClient сконфигурирован так, чтобы выполнять повторы в случае кратковременных сбоев. Такая возможность реализована библиотекой Polly.
У меня нет оценок надежности использования локальной базы данных перед http запросом к мастер-системе. Выбор приоритета к пользу локальной базы данных сделан на основе интуиции.